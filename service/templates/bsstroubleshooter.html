<!DOCTYPE html>
<html lang="en">
<head>
  <title>XandrTools</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link  href="templates/styles.css" rel="stylesheet"  type="text/css">
</head>
<body>
  <script>
    function respNavigation() {
      var x = document.getElementById("myTopnav");
      if (x.className === "topnav") {
        x.className += " responsive";
      } else {
        x.className = "topnav";
      }
    }
  </script>
  
  <div class="topnav" id="myTopnav">
    <a href="/">XandrTools</a>
    <div class="dropdown">
      <button class="dropbtn">Tools
        <i class="fa fa-caret-down"></i>
      </button>
      <div class="dropdown-content">
        <a href="/validators">Validators</a>
        <a href="/textGenerator">Generate text sample</a>
        <a href="/bsstroubleshooter"> BSS Trouble Shooter</a>
      </div>
    </div>
    <div class="dropdown">
      <button class="dropbtn">About
        <i class="fa fa-caret-down"></i>
      </button>
      <div class="dropdown-content">
        <a href="https://github.com/milla-v/xandr/releases/tag/{{.XandrVersion}}" target="_blank">xandr-lib-{{.XandrVersion}}</a>
        <a href="https://github.com/milla-v/xandrtools/commit/{{.VCS.RevisionFull}}" target="_blank">xandrtools-{{.VCS.RevisionShort}} {{if eq .VCS.Modified true}}modified{{end}}</a>
      </div>
    </div>
    <a href="javascript:void(0);" style="font-size:15px;" class="icon" onclick="respNavigation()">&#9776;</a>
  </div>
  <div class="content-box">
    <div style="padding-left:16px">
      <h2>BSS Upload Troubleshooter</h2>
      <br>
      <form method="POST" name="login">
        <div style="display: flex;">
          <div style="margin: 10px;">
            {{if eq .Token ""}}
              <label for="usernameid">User name:</label><br>
              <input type="text" id="usernameid" name="username" class="valid-input" {{if ne .Auth.Auth.Username ""}} value="{{.Auth.Auth.Username}}" {{else}} placeholder="Enter username" {{end}}><br>
              <label for="passwordid">Password:</label><br>
              <input type="text" id="passwordid" name="password" class="valid-input" {{if ne .Auth.Auth.Password ""}} value="{{.Auth.Auth.Password}}" {{else}} placeholder="Enter password" {{end}}><br>
            {{end}}
            {{if ne .Token ""}}
              <label for="usernameid">Get jobs User name:</label><br>
              <input type="text" id="usernameid" name="username" class="valid-input" {{if ne .User.Username ""}} value="{{.User.Username}}" {{else}} placeholder="Enter username" {{end}}><br>
              <label for="tokenid">Token:</label><br>
              <input type="text" id="tokenid" name="token" class="valid-input" value="{{.Token}}"><br>
              <label for="memberid">Member ID:</label><br>
              <input type="text" id="memberidid" name="memberid" class="valid-input" {{if ne .User.TokenData.MemberId 0}} value="{{.User.TokenData.MemberId}}" {{else}} placeholder="Enter Member ID" {{end}}><br>
            {{end}}
            {{if and (ne .User.Username "") (ne .Token "")}}
              <input type="submit" value="Get Jobs" name="submit" class="valid-submit" style="margin-top: 10px;">
            {{else}}
              <input type="submit" value="Login" name="submit" class="valid-submit" style="margin-top: 10px;">
            {{end}}
          </div>
          <div style="margin: 10px;">
            <select name="backend" style="padding: 10px; font-size: inherit; margin-top: 5px;">
            	<option>simulator</option>
            	<option>xandr</option>
            </select>
          </div>
        </div>
      </form>
      {{if eq .IsJobs true}}
        <div style="display: flex;">
          <div style="margin: 10px;">
            <table id="jobs">
            {{range .JobList}}
              <tr>
                <th colspan="3">Job ID : {{.JobID}}</th>
              </tr>
              <tr>
                <td>comleted_time:</td>
                <td>{{.CompletedTime}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>created_on:</td>
                <td>{{.CreatedOn}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>error_code:</td>
                <td>{{.ErrorCode}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>error_log_lines:</td>
                <td>{{.ErrorLogLines}}</td>
                {{if ne .ErrorLogLinesErr ""}}
                  <td style="color:red;">{{.ErrorLogLinesErr}}</td>
                {{else}}
                  <td></td>
                {{end}}
              </tr>
              <tr>
                <td>id:</td>
                <td>{{.ID}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>is_beam_file:</td>
                <td>{{.IsBeamFile}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>job_id:</td>
                <td>{{.JobID}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>last_modified:</td>
                <td>{{.LastModified}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>member_id:</td>
                <td>{{.MemberID}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>num_inactive_segment:</td>
                <td>{{.NumInactiveSegment}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>num_invalid_format:</td>
                <td>{{.NumInvalidFormat}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>num_invalid_segment:</td>
                <td>{{.NumInvalidSegment}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>num_invalid_timestamp:</td>
                <td>{{.NumInvalidTimestamp}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>num_invalid_user:</td>
                <td>{{.NumInvalidUser}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>num_other_error:</td>
                <td>{{.NumOtherError}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>num_past_expiration:</td>
                <td>{{.NumPastExpiration}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>num_unauth_segment:</td>
                <td>{{.NumUnauthSegment}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>num_valid:</td>
                <td>{{.NumValid}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>num_valid_user:</td>
                <td>{{.NumValidUser}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>percent_complete:</td>
                <td>{{.PercentComplete}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>phase:</td>
                <td>{{.Phase}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>segment_log_lines:</td>
                <td>{{.SegmentLogLines}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>start_time:</td>
                <td>{{.StartTime}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>time_to_process:</td>
                <td>{{.TimeToProcess}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>uploaded_time:</td>
                <td>{{.UploadedTime}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>validated_time:</td>
                <td>{{.ValidatedTime}}</td>
                <td>ok</td>
              </tr>
              <tr>
                <td>match rate:</td>
                <td>{{.MatchRate}}%</td>
                {{if ne .MatchRateErr ""}}
                  <td style="color: red;">{{.MatchRateErr}}</td>
                {{else}}
                  <td>
                {{end}}
              </tr>
            {{end}}
            </table>
          </div>
        </div>
      {{end}}
    </div>
  </div>

  <div class="footer">
    <div class="footer-col">
      {{.XandrVersion}}
    </div>
  </div>
</body>
</html>
